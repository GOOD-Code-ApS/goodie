# @goodie-ts/core

Runtime dependency injection container for [goodie-ts](https://github.com/GOOD-Code-ApS/goodie).

## Install

```bash
pnpm add @goodie-ts/core
```

## Overview

This package provides the runtime container that resolves pre-built `BeanDefinition[]` arrays generated by [`@goodie-ts/transformer`](https://www.npmjs.com/package/@goodie-ts/transformer). No reflection, no scanning — just a fast topological sort and lazy instantiation.

## Key Exports

- **`ApplicationContext`** — DI container with `create()`, `get()`, `getAsync()`, `getAll()`, `close()`
- **`Goodie` / `GoodieBuilder`** — Bootstrap builder: `Goodie.build(definitions).start()`
- **`InjectionToken<T>`** — Typed token for interfaces, primitives, and generics
- **`BeanDefinition<T>`** — Bean descriptor with token, scope, factory, dependencies, and metadata

## Usage

```typescript
import { Goodie } from '@goodie-ts/core';
import { definitions } from './AppContext.generated.js';

const app = await Goodie.build(definitions).start();
const userService = app.context.get(UserService);

// When done:
await app.context.close();
```

## API

- `ApplicationContext.create(defs)` — async factory, topo-sorts and validates the dependency graph
- `ctx.get(token)` — synchronous lookup (throws for unresolved async beans)
- `ctx.getAsync(token)` — always safe for async factories
- `ctx.getAll(token)` — returns all beans registered under a token
- `ctx.close()` — tears down the context

## License

[MIT](https://github.com/GOOD-Code-ApS/goodie/blob/main/LICENSE)
